dist: trusty
sudo: false
language: ruby
cache:
  bundler: true
script:
  - bundle exec middleman build
env:
  global:
    - PAAS_USERNAME=gsd-deploy@digital.cabinet-office.gov.uk
    - secure: "cbd0x/6CqPu0gERvPb9KqOI6e5aVpYdrppLXS6Uh3OXKBoKJMvBg0BYoZH7rJv4aPnQo14z/78VHgkB4yk1wstFFUN4c4ntUHT/e9EzoI3x8yqIW9elcDMvl57gRhqceMPALAGeo/Ppp8z3rirnXfJCMzt0qyqMs06SLGyK1LQmnuemKGm14o7PWXFIpGGZ4rSGYGYQUAhW4v0QqnrLR6pyXGhaoZFlmsKuIJoRPdpGRzzqNb4eYT1qt+RJL8ayY0VTAdpJz+xwBRIFVmVNKRKCT/GjEI9k4TfnjRyiKiUo33smy37iNi25gmymK1iD3fXjXrRRmuzdyYzYqle1lfUjoVh+vqDpmkuzcNPNUG5C6mrSFSNMSYx7ZgIN78wnjPgC/NN4FkdVWXUnOgrosdb3KJgHqF2g+Wc1m306Dtujcdu+DowO3P6p7bmC65UK625KzvDh2EVik3tdl/iyBEkE8YpWItUld80YCGgAzzg4HNpXNSMc/tzvfBp+fh4fycTWvbbYWKYkfrgR97iMrHVdYuRkiDrb8aB5rdhLnxb1fxq354OoTxWbE0vJ2psFzNyrVCeW5BCN1pCj14GBy2mp5V5YzBA2PDbXUWI1AFJv7wp4ASZ7Tn8JJcEM1nhE//2BvDcaJsJvtF3sxH2G6wIs7hjaecp5v8TuhE/Yz1Kw="
deploy:
  provider: cloudfoundry
  username: ${PAAS_USERNAME}
  password: ${PAAS_PASSWORD}
  api: https://api.cloud.service.gov.uk
  organization: government-service-data
  space: staging
  manifest: manifest.staging.yml
  on:
    branch: staging
